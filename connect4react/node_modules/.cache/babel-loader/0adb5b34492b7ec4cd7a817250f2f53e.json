{"ast":null,"code":"var _jsxFileName = \"/Users/madhavramesh/Desktop/Brown University/Connect 4 React/connect4react/src/Canvas.js\",\n    _s = $RefreshSig$();\n\nimport React, { useRef, useEffect, useState } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Canvas(props) {\n  _s();\n\n  let canvas;\n  const canvasHeight = props.canvasSize;\n  const canvasWidth = props.canvasWidth;\n  const canvasRef = useRef(null);\n  const drawRegionLeft = props.drawRegionLeft;\n  const drawRegionRight = props.drawRegionRight;\n  const drawRegionTop = props.drawRegionTop;\n  const drawRegionBottom = props.drawRegionBottom;\n  const [chipCoords, setChipCoords] = useState([]);\n  const chipsPerRow = 4;\n  const chipRad = 50;\n  const newDrawRegionLeft = drawRegionLeft - chipRad - 40;\n  const newDrawRegionTop = drawRegionTop - chipRad - 40;\n  const w = drawRegionRight - drawRegionLeft + 2 * (chipRad + 40);\n  const h = drawRegionBottom - drawRegionTop + 2 * (chipRad + 40);\n  const [mouseX, setMouseX] = useState(0);\n  const [mouseY, setMouseY] = useState(0);\n\n  const setUp = ctx => {\n    ctx.fillStyle = \"#DCDCDC\";\n    ctx.fillRect(0, 0, canvasSize, canvasSize); // prettier-ignore\n\n    for (let i = drawRegionLeft; i <= drawRegionRight; i += (drawRegionRight - drawRegionLeft) / (chipsPerRow - 1)) {\n      for (let j = drawRegionTop; j <= drawRegionBottom; j += (drawRegionBottom - drawRegionTop) / (chipsPerRow - 1)) {\n        const newChipCoords = chipCoords;\n        newChipCoords.push([i, j, false]);\n        setChipCoords(newChipCoords);\n      }\n    }\n  }; // prettier-ignore\n\n\n  const drawBoard = (ctx, color, topLeftX, topLeftY, w, h) => {\n    ctx.fillStyle = color;\n    ctx.fillRect(topLeftX, topLeftY, w, h);\n\n    for (const coord of chipCoords) {\n      drawChip(ctx, \"#DCDCDC\", coord[0], coord[1], chipRad);\n    }\n  };\n\n  const drawChips = ctx => {\n    for (const coord of chipCoords) {\n      if (coord[2]) {\n        drawChip(ctx, \"#900000\", coord[0], coord[1], chipRad);\n      }\n    }\n\n    drawChip(ctx, \"#900000\", player1chip[0], player1chip[1]);\n    drawChip(ctx, \"#fbec5d\", player2chip[0], player2chip[1]);\n\n    if (player1chipIsDown) {\n      drawChip(ctx, \"#900000\", player1chipDrag[0], player1chipDrag[1]);\n    } else if (player2chipIsDown) {\n      drawChip(ctx, \"#fbec5d\", player2chipDrag[0], player2chipDrag[1]);\n    }\n  };\n\n  const drawChip = (ctx, color, x, y) => {\n    ctx.fillStyle = color;\n    ctx.beginPath();\n    ctx.arc(x, y, chipRad, 0, 2 * Math.PI);\n    ctx.fill();\n    ctx.stroke();\n  };\n\n  const dist = (x1, x2, y1, y2) => {\n    console.log(\"X1: \" + x1);\n    console.log(\"X2: \" + x2);\n    console.log(\"Y1: \" + y1);\n    console.log(\"Y2: \" + y2);\n    return Math.sqrt((x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1));\n  };\n\n  const handleMouseDown = event => {\n    event.preventDefault();\n    event.stopPropagation();\n    setMouseX(parseInt(event.clientX - canvasLeftEdge));\n    setMouseY(parseInt(event.clientY - canvasTopEdge));\n\n    if (dist(player1chip[0], mouseX, player1chip[1], mouseY) < chipRad) {\n      console.log(\"Chip 1 down\");\n      setPlayer1chipIsDown(true);\n    } else if (dist(player2chip[0], mouseX, player2chip[1], mouseY) < chipRad) {\n      console.log(\"Chip 2 down\");\n      setPlayer2chipIsDown(true);\n    }\n  };\n\n  const handleMouseMove = event => {\n    if (!player1chipIsDown && !player2chipIsDown) return;\n    event.preventDefault();\n    event.stopPropagation();\n    const curMouseX = parseInt(event.clientX - canvasLeftEdge);\n    const curMouseY = parseInt(event.clientY - canvasTopEdge);\n    const dx = curMouseX - mouseX;\n    const dy = curMouseY - mouseY;\n    setMouseX(curMouseX);\n    setMouseY(curMouseY);\n\n    if (player1chipIsDown) {\n      setPlayer1chipDrag([player1chipDrag[0] + dx, player1chipDrag[1] + dy]);\n      console.log(\"Moving chip 1\");\n    } else if (player2chipIsDown) {\n      setPlayer2chipDrag([player2chipDrag[0] + dx, player2chipDrag[1] + dy]);\n    }\n  };\n\n  const drop = (chipX, chipY, rectLeft, rectRight) => {\n    let newChipCoords = chipCoords;\n\n    if (chipX >= rectLeft && chipX < rectLeft + rectRight / 4) {\n      newChipCoords[3][3] = true;\n      setChipCoords(newChipCoords);\n    } else if (chipX >= rectLeft + rectRight / 4 && chipX < rectLeft + rectRight / 2) {\n      newChipCoords[7][3] = true;\n      setChipCoords(newChipCoords);\n    } else if (chipX >= rectLeft + rectRight / 2 && chipX < rectLeft + 3 * rectRight / 4) {\n      newChipCoords[11][3] = true;\n      setChipCoords(newChipCoords);\n    } else if (chipX >= rectLeft + 3 * rectRight / 4 && chipX <= rectRight) {\n      newChipCoords[15][3] = true;\n      setChipCoords(newChipCoords);\n    }\n  };\n\n  const handleMouseUp = event => {\n    event.preventDefault();\n    event.stopPropagation(); //drop(player1chipDrag[0], player1chipDrag[1]);\n    //drop(player2chipDrag[0], player2chipDrag[1]);\n\n    setPlayer1chipIsDown(false);\n    setPlayer2chipIsDown(false);\n    setPlayer1chipDrag(player1chip);\n    setPlayer2chipDrag(player2chip);\n  };\n\n  const handleMouseOut = event => {\n    event.preventDefault();\n    event.stopPropagation();\n    handleMouseUp(event);\n  };\n\n  useEffect(() => {\n    canvas = canvasRef.current;\n    let ctx = canvas.getContext(\"2d\");\n    const rect = canvas.getBoundingClientRect();\n    console.log(\"Bounding rect: \" + rect.left);\n    setCanvasLeftEdge(rect.left);\n    setCanvasTopEdge(rect.top);\n    setUp(ctx);\n    drawBoard(ctx, \"#0099FF\", newDrawRegionLeft, newDrawRegionTop, w, h);\n  }, []);\n  useEffect(() => {\n    canvas = canvasRef.current;\n    let ctx = canvas.getContext(\"2d\");\n    console.log(\"Redrawing...\");\n    drawChips(ctx);\n  }, [chipCoords, player1chipDrag, player2chipDrag]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"canvas\",\n    children: /*#__PURE__*/_jsxDEV(\"canvas\", {\n      ref: canvasRef,\n      width: canvasSize,\n      height: canvasSize,\n      onMouseDown: handleMouseDown,\n      onMouseMove: handleMouseMove,\n      onMouseUp: handleMouseUp,\n      onMouseOut: handleMouseOut\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 183,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Canvas, \"e7IsZeAxPHGjkdXXIob+LRRwrWw=\");\n\n_c = Canvas;\nexport default Canvas;\n\nvar _c;\n\n$RefreshReg$(_c, \"Canvas\");","map":{"version":3,"sources":["/Users/madhavramesh/Desktop/Brown University/Connect 4 React/connect4react/src/Canvas.js"],"names":["React","useRef","useEffect","useState","Canvas","props","canvas","canvasHeight","canvasSize","canvasWidth","canvasRef","drawRegionLeft","drawRegionRight","drawRegionTop","drawRegionBottom","chipCoords","setChipCoords","chipsPerRow","chipRad","newDrawRegionLeft","newDrawRegionTop","w","h","mouseX","setMouseX","mouseY","setMouseY","setUp","ctx","fillStyle","fillRect","i","j","newChipCoords","push","drawBoard","color","topLeftX","topLeftY","coord","drawChip","drawChips","player1chip","player2chip","player1chipIsDown","player1chipDrag","player2chipIsDown","player2chipDrag","x","y","beginPath","arc","Math","PI","fill","stroke","dist","x1","x2","y1","y2","console","log","sqrt","handleMouseDown","event","preventDefault","stopPropagation","parseInt","clientX","canvasLeftEdge","clientY","canvasTopEdge","setPlayer1chipIsDown","setPlayer2chipIsDown","handleMouseMove","curMouseX","curMouseY","dx","dy","setPlayer1chipDrag","setPlayer2chipDrag","drop","chipX","chipY","rectLeft","rectRight","handleMouseUp","handleMouseOut","current","getContext","rect","getBoundingClientRect","left","setCanvasLeftEdge","setCanvasTopEdge","top"],"mappings":"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","sourcesContent":["import React, { useRef, useEffect, useState } from \"react\";\n\nfunction Canvas(props) {\n  let canvas;\n  const canvasHeight = props.canvasSize;\n  const canvasWidth = props.canvasWidth;\n  const canvasRef = useRef(null);\n\n  const drawRegionLeft = props.drawRegionLeft;\n  const drawRegionRight = props.drawRegionRight;\n  const drawRegionTop = props.drawRegionTop;\n  const drawRegionBottom = props.drawRegionBottom;\n\n  const [chipCoords, setChipCoords] = useState([]);\n  const chipsPerRow = 4;\n  const chipRad = 50;\n\n  const newDrawRegionLeft = drawRegionLeft - chipRad - 40;\n  const newDrawRegionTop = drawRegionTop - chipRad - 40;\n  const w = drawRegionRight - drawRegionLeft + 2 * (chipRad + 40);\n  const h = drawRegionBottom - drawRegionTop + 2 * (chipRad + 40);\n\n  const [mouseX, setMouseX] = useState(0);\n  const [mouseY, setMouseY] = useState(0);\n\n  const setUp = (ctx) => {\n    ctx.fillStyle = \"#DCDCDC\";\n    ctx.fillRect(0, 0, canvasSize, canvasSize);\n\n    // prettier-ignore\n    for (let i = drawRegionLeft; i <= drawRegionRight; i += (drawRegionRight - drawRegionLeft) / (chipsPerRow - 1)) {\n      for (let j = drawRegionTop; j <= drawRegionBottom; j += (drawRegionBottom - drawRegionTop) / (chipsPerRow - 1)) {\n        const newChipCoords = chipCoords;\n        newChipCoords.push([i, j, false]);\n        setChipCoords(newChipCoords);\n      }\n    }\n  };\n\n  // prettier-ignore\n  const drawBoard = (ctx, color, topLeftX, topLeftY, w, h) => {\n    ctx.fillStyle = color;\n    ctx.fillRect(topLeftX, topLeftY, w, h);\n\n    for (const coord of chipCoords) {\n      drawChip(ctx, \"#DCDCDC\", coord[0], coord[1], chipRad);\n    }\n  };\n\n  const drawChips = (ctx) => {\n    for (const coord of chipCoords) {\n      if (coord[2]) {\n        drawChip(ctx, \"#900000\", coord[0], coord[1], chipRad);\n      }\n    }\n    drawChip(ctx, \"#900000\", player1chip[0], player1chip[1]);\n    drawChip(ctx, \"#fbec5d\", player2chip[0], player2chip[1]);\n    if (player1chipIsDown) {\n      drawChip(ctx, \"#900000\", player1chipDrag[0], player1chipDrag[1]);\n    } else if (player2chipIsDown) {\n      drawChip(ctx, \"#fbec5d\", player2chipDrag[0], player2chipDrag[1]);\n    }\n  };\n\n  const drawChip = (ctx, color, x, y) => {\n    ctx.fillStyle = color;\n    ctx.beginPath();\n    ctx.arc(x, y, chipRad, 0, 2 * Math.PI);\n    ctx.fill();\n    ctx.stroke();\n  };\n\n  const dist = (x1, x2, y1, y2) => {\n    console.log(\"X1: \" + x1);\n    console.log(\"X2: \" + x2);\n    console.log(\"Y1: \" + y1);\n    console.log(\"Y2: \" + y2);\n    return Math.sqrt((x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1));\n  };\n\n  const handleMouseDown = (event) => {\n    event.preventDefault();\n    event.stopPropagation();\n\n    setMouseX(parseInt(event.clientX - canvasLeftEdge));\n    setMouseY(parseInt(event.clientY - canvasTopEdge));\n\n    if (dist(player1chip[0], mouseX, player1chip[1], mouseY) < chipRad) {\n      console.log(\"Chip 1 down\");\n      setPlayer1chipIsDown(true);\n    } else if (dist(player2chip[0], mouseX, player2chip[1], mouseY) < chipRad) {\n      console.log(\"Chip 2 down\");\n      setPlayer2chipIsDown(true);\n    }\n  };\n\n  const handleMouseMove = (event) => {\n    if (!player1chipIsDown && !player2chipIsDown) return;\n\n    event.preventDefault();\n    event.stopPropagation();\n\n    const curMouseX = parseInt(event.clientX - canvasLeftEdge);\n    const curMouseY = parseInt(event.clientY - canvasTopEdge);\n    const dx = curMouseX - mouseX;\n    const dy = curMouseY - mouseY;\n    setMouseX(curMouseX);\n    setMouseY(curMouseY);\n\n    if (player1chipIsDown) {\n      setPlayer1chipDrag([player1chipDrag[0] + dx, player1chipDrag[1] + dy]);\n      console.log(\"Moving chip 1\");\n    } else if (player2chipIsDown) {\n      setPlayer2chipDrag([player2chipDrag[0] + dx, player2chipDrag[1] + dy]);\n    }\n  };\n\n  const drop = (chipX, chipY, rectLeft, rectRight) => {\n    let newChipCoords = chipCoords;\n    if (chipX >= rectLeft && chipX < rectLeft + rectRight / 4) {\n      newChipCoords[3][3] = true;\n      setChipCoords(newChipCoords);\n    } else if (\n      chipX >= rectLeft + rectRight / 4 &&\n      chipX < rectLeft + rectRight / 2\n    ) {\n      newChipCoords[7][3] = true;\n      setChipCoords(newChipCoords);\n    } else if (\n      chipX >= rectLeft + rectRight / 2 &&\n      chipX < rectLeft + (3 * rectRight) / 4\n    ) {\n      newChipCoords[11][3] = true;\n      setChipCoords(newChipCoords);\n    } else if (chipX >= rectLeft + (3 * rectRight) / 4 && chipX <= rectRight) {\n      newChipCoords[15][3] = true;\n      setChipCoords(newChipCoords);\n    }\n  };\n\n  const handleMouseUp = (event) => {\n    event.preventDefault();\n    event.stopPropagation();\n\n    //drop(player1chipDrag[0], player1chipDrag[1]);\n    //drop(player2chipDrag[0], player2chipDrag[1]);\n\n    setPlayer1chipIsDown(false);\n    setPlayer2chipIsDown(false);\n    setPlayer1chipDrag(player1chip);\n    setPlayer2chipDrag(player2chip);\n  };\n\n  const handleMouseOut = (event) => {\n    event.preventDefault();\n    event.stopPropagation();\n    handleMouseUp(event);\n  };\n\n  useEffect(() => {\n    canvas = canvasRef.current;\n    let ctx = canvas.getContext(\"2d\");\n\n    const rect = canvas.getBoundingClientRect();\n    console.log(\"Bounding rect: \" + rect.left);\n    setCanvasLeftEdge(rect.left);\n    setCanvasTopEdge(rect.top);\n\n    setUp(ctx);\n    drawBoard(ctx, \"#0099FF\", newDrawRegionLeft, newDrawRegionTop, w, h);\n  }, []);\n\n  useEffect(() => {\n    canvas = canvasRef.current;\n    let ctx = canvas.getContext(\"2d\");\n\n    console.log(\"Redrawing...\");\n\n    drawChips(ctx);\n  }, [chipCoords, player1chipDrag, player2chipDrag]);\n\n  return (\n    <div className=\"canvas\">\n      <canvas\n        ref={canvasRef}\n        width={canvasSize}\n        height={canvasSize}\n        onMouseDown={handleMouseDown}\n        onMouseMove={handleMouseMove}\n        onMouseUp={handleMouseUp}\n        onMouseOut={handleMouseOut}\n      ></canvas>\n    </div>\n  );\n}\n\nexport default Canvas;\n"]},"metadata":{},"sourceType":"module"}