{"version":3,"sources":["Canvas.js","App.js","reportWebVitals.js","index.js"],"names":["Canvas","props","canvasWidth","canvasHeight","canvasRef","useRef","drawRegionLeft","drawRegionRight","drawRegionTop","drawRegionBottom","useState","chipCoords","setChipCoords","chipRad","defaultColor","newDrawRegionLeft","newDrawRegionTop","w","h","player","setPlayer","mouseX","setMouseX","mouseY","setMouseY","win","setWin","drawChips","ctx","col","row","drawChip","color","x","y","fillStyle","beginPath","arc","Math","PI","fill","stroke","drop","chipColor","clickX","clickY","newChipCoords","newDrawRegionRight","newDrawRegionBottom","i","console","log","floor","length","j","mousePosOnCanvas","canvas","current","rect","getBoundingClientRect","scaleX","width","scaleY","height","left","top","useEffect","getContext","fillRect","push","setUp","topLeftX","topLeftY","drawBoard","calculateWin","className","ref","onMouseDown","event","preventDefault","stopPropagation","mousePos","clientX","clientY","onMouseUp","curMousePos","curMouseX","curMouseY","type","onPress","resetChips","App","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.e2fb1276.chunk.js","sourcesContent":["import React, { useRef, useEffect, useState } from \"react\";\nimport { AwesomeButton } from \"react-awesome-button\";\nimport \"react-awesome-button/dist/styles.css\";\nimport Popup from \"react-popup\";\n\nfunction Canvas(props) {\n  let canvas;\n  const canvasWidth = props.canvasWidth;\n  const canvasHeight = props.canvasHeight;\n  const canvasRef = useRef(null);\n\n  const drawRegionLeft = props.drawRegionLeft;\n  const drawRegionRight = props.drawRegionRight;\n  const drawRegionTop = props.drawRegionTop;\n  const drawRegionBottom = props.drawRegionBottom;\n\n  const [chipCoords, setChipCoords] = useState([]);\n  const chipsPerRow = 7;\n  const chipsPerCol = 6;\n  const chipRad = 50;\n\n  const defaultColor = \"#DCDCDC\";\n  const redChipColor = \"#900000\";\n  const yellowChipColor = \"#fbec5d\";\n\n  const newDrawRegionLeft = drawRegionLeft - chipRad - 40;\n  const newDrawRegionTop = drawRegionTop - chipRad - 40;\n  const w = drawRegionRight - drawRegionLeft + 2 * (chipRad + 40);\n  const h = drawRegionBottom - drawRegionTop + 2 * (chipRad + 40);\n\n  const [player, setPlayer] = useState(0);\n  const [mouseX, setMouseX] = useState(0);\n  const [mouseY, setMouseY] = useState(0);\n\n  const [win, setWin] = useState(false);\n\n  const setUp = (ctx) => {\n    ctx.fillStyle = defaultColor;\n    ctx.fillRect(0, 0, canvasWidth, canvasHeight);\n\n    const newChipCoords = chipCoords;\n    // prettier-ignore\n    for (let i = drawRegionLeft; i <= drawRegionRight; i += (drawRegionRight - drawRegionLeft) / (chipsPerRow - 1)) {\n      const row = [];\n      for (let j = drawRegionTop; j <= drawRegionBottom; j += (drawRegionBottom - drawRegionTop) / (chipsPerCol - 1)) {\n        row.push([i, j, defaultColor]);\n      }\n      newChipCoords.push(row);\n    }\n    setChipCoords(newChipCoords);\n  };\n\n  // prettier-ignore\n  const drawBoard = (ctx, color, topLeftX, topLeftY, w, h) => {\n    ctx.fillStyle = color;\n    ctx.fillRect(topLeftX, topLeftY, w, h);\n  };\n\n  const drawChips = (ctx) => {\n    for (const col of chipCoords) {\n      for (const row of col) {\n        drawChip(ctx, row[2], row[0], row[1], chipRad);\n      }\n    }\n  };\n\n  const drawChip = (ctx, color, x, y) => {\n    ctx.fillStyle = color;\n    ctx.beginPath();\n    ctx.arc(x, y, chipRad, 0, 2 * Math.PI);\n    ctx.fill();\n    ctx.stroke();\n  };\n\n  // prettier-ignore\n  const drop = (chipColor, clickX, clickY) => {\n    const newChipCoords = chipCoords;\n\n    const newDrawRegionRight = newDrawRegionLeft + w;\n    const newDrawRegionBottom = newDrawRegionTop + h;\n\n    for (let i = newDrawRegionLeft; i < newDrawRegionRight; i += (newDrawRegionRight - newDrawRegionLeft) / (chipsPerRow - 1)) {\n      const leftBoundary = i;\n      const rightBoundary = i + (newDrawRegionRight - newDrawRegionLeft) / (chipsPerRow - 1);\n      if (clickX >= leftBoundary && clickX < rightBoundary && clickY >= newDrawRegionTop && clickY <= newDrawRegionBottom) {\n        console.log(\"Click confirmed\");\n        let col = Math.floor((clickX - newDrawRegionLeft) / w * chipsPerRow);\n        let row = chipCoords[col].length - 1;\n\n        for (let j = 0; j < chipCoords[col].length; j++) {\n          if (chipCoords[col][j][2] !== defaultColor) {\n            row = j - 1;\n            break;\n          }\n        }\n        if (row >= 0) {\n          newChipCoords[col][row][2] = chipColor;\n        }\n      }\n    }\n    setChipCoords(newChipCoords);\n  };\n\n  const mousePosOnCanvas = (x, y) => {\n    const canvas = canvasRef.current;\n    const rect = canvas.getBoundingClientRect();\n    const scaleX = canvas.width / rect.width;\n    const scaleY = canvas.height / rect.height;\n\n    return {\n      x: (x - rect.left) * scaleX,\n      y: (y - rect.top) * scaleY,\n    };\n  };\n\n  const handleMouseDown = (event) => {\n    event.preventDefault();\n    event.stopPropagation();\n\n    const mousePos = mousePosOnCanvas(event.clientX, event.clientY);\n    setMouseX(mousePos[\"x\"]);\n    setMouseY(mousePos[\"y\"]);\n  };\n\n  const handleMouseUp = (event) => {\n    event.preventDefault();\n    event.stopPropagation();\n\n    const curMousePos = mousePosOnCanvas(event.clientX, event.clientY);\n    const curMouseX = curMousePos[\"x\"];\n    const curMouseY = curMousePos[\"y\"];\n    const dx = curMouseX - mouseX;\n    const dy = curMouseY - mouseY;\n\n    if (dx > 0.1 || dy > 0.1) {\n      return;\n    }\n\n    if (player === 0) {\n      drop(redChipColor, mouseX, mouseY);\n      setPlayer(1);\n    } else if (player === 1) {\n      drop(yellowChipColor, mouseX, mouseY);\n      setPlayer(0);\n    }\n  };\n\n  // prettier-ignore\n  const calculateWin = () => {\n    // vertical win\n    for (let i = 0; i < chipCoords.length; i++) {\n      for (let j = 0; j < chipCoords[i].length - 3; j++) {\n        if (chipCoords[i][j][2] === chipCoords[i][j + 1][2]\n        && chipCoords[i][j + 1][2] === chipCoords[i][j + 2][2]\n        && chipCoords[i][j + 2][2] === chipCoords[i][j + 3][2]\n        && chipCoords[i][j][2] !== defaultColor) {\n          setWin(true);\n        }\n      }\n    }\n\n    // horizontal win\n    for (let i = 0; i < chipCoords.length - 3; i++) {\n      for (let j = 0; j < chipCoords[i].length; j++) {\n        if (chipCoords[i][j][2] === chipCoords[i+1][j][2]\n            && chipCoords[i+1][j][2] === chipCoords[i+2][j][2]\n            && chipCoords[i+2][j][2] === chipCoords[i+3][j][2]\n            && chipCoords[i][j][2] !== defaultColor) {\n          setWin(true);\n        }\n      }\n    }\n\n    // descending diagonal\n    for (let i = 3; i < chipCoords.length; i++) {\n      for (let j = 3; j < chipCoords[i].length; j++) {\n        if (chipCoords[i][j][2] === chipCoords[i-1][j-1][2]\n            && chipCoords[i-1][j-1][2] === chipCoords[i-2][j-2][2]\n            && chipCoords[i-2][j-2][2] === chipCoords[i-3][j-3][2]\n            && chipCoords[i][j][2] !== defaultColor) {\n          setWin(true);\n        }\n      }\n    }\n\n    // ascending diagonal\n    for (let i = 0; i < chipCoords.length - 3; i++) {\n      for (let j = 3; j < chipCoords[i].length; j++) {\n        if (chipCoords[i][j][2] === chipCoords[i+1][j-1][2]\n            && chipCoords[i+1][j-1][2] === chipCoords[i+2][j-2][2]\n            && chipCoords[i+2][j-2][2] === chipCoords[i+3][j-3][2]\n            && chipCoords[i][j][2] !== defaultColor) {\n          setWin(true);\n        }\n      }\n    }\n  }\n\n  // prettier-ignore\n  const resetChips = () => {\n    canvas = canvasRef.current;\n    let ctx = canvas.getContext(\"2d\");\n\n    const newChipCoords = chipCoords;\n    for (let i = 0; i < chipCoords.length; i++) {\n      for (let j = 0; j < chipCoords[i].length; j++) {\n        newChipCoords[i][j][2] = defaultColor;\n      }\n    }\n    setChipCoords(newChipCoords);\n    setWin(false);\n    console.log(chipCoords);\n  };\n\n  useEffect(() => {\n    canvas = canvasRef.current;\n    let ctx = canvas.getContext(\"2d\");\n\n    setUp(ctx);\n    drawBoard(ctx, \"#0099FF\", newDrawRegionLeft, newDrawRegionTop, w, h);\n  }, []);\n\n  useEffect(() => {\n    canvas = canvasRef.current;\n    let ctx = canvas.getContext(\"2d\");\n\n    console.log(\"Redrawing...\");\n\n    if (!win) {\n      drawChips(ctx);\n      calculateWin();\n    } else {\n      console.log(\"WINNER\");\n    }\n  }, [drawChips]);\n\n  return (\n    <div className=\"canvas\">\n      <canvas\n        ref={canvasRef}\n        width={canvasWidth}\n        height={canvasHeight}\n        onMouseDown={handleMouseDown}\n        onMouseUp={handleMouseUp}\n      ></canvas>\n      <AwesomeButton type=\"primary\" onPress={() => resetChips()}>\n        Clear Board\n      </AwesomeButton>\n    </div>\n  );\n}\n\nexport default Canvas;\n","import React, { useRef, useEffect, useState } from \"react\";\nimport Canvas from \"./Canvas\";\nimport \"./App.css\";\n\nfunction App() {\n  const canvasWidth = 1400;\n  const canvasHeight = 1000;\n\n  const drawRegionLeft = 200;\n  const drawRegionRight = canvasWidth - drawRegionLeft;\n  const drawRegionTop = 200;\n  const drawRegionBottom = canvasHeight - 100;\n\n  return (\n    <div className=\"App\">\n      <header className=\"App-header\">\n        <Canvas\n          canvasWidth={canvasWidth}\n          canvasHeight={canvasHeight}\n          drawRegionLeft={drawRegionLeft}\n          drawRegionRight={drawRegionRight}\n          drawRegionTop={drawRegionTop}\n          drawRegionBottom={drawRegionBottom}\n        ></Canvas>\n      </header>\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}